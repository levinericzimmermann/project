[configure]
name                    = "10.1"
logging_level           = "info"

[configure.audio]
audio                   = "jack"
midi                    = "jack"
sampling_rate           = 44100
buffer_size             = 512
channel_count           = 2

{% set fade_in          = 5 %}
{% set fade_out         = 8 %}

{% for pin_index in [0, 1, 2] %}

{% set string_index = loop.index - 1 %}

[configure.module.string.{{ string_index }}]
com_port                = "/dev/ttyACM0"
pin_index               = {{ pin_index }}
fade_in_duration        = {{ fade_in }}
fade_out_duration       = {{ fade_out }}

{% endfor %}

# Pickup 1
[configure.module.audio_input.0]
input_channel_index     = 0
fade_in_duration        = {{ fade_in }}
fade_out_duration       = {{ fade_out }}

[configure.module.compressor.0]
audio_input           = "audio_input.0"

[configure.module.value.audio_input_0_child_decibel]
# We have a very quiet signal
value                   = 50

[configure.module.aeolian_harp.0]
audio_input_0           = "compressor.0"
audio_input_1           = "string.0"
audio_input_2           = "string.1"
audio_input_3           = "string.2"

    [configure.module.aeolian_harp.0.audio_input_index_to_pyo_object_index]
    0 = 0

[configure.module.mixer.strings]
audio_input_0           = "aeolian_harp.0.0"

[configure.module.butterworth_highpass_filter.strings]
audio_input             = "mixer.strings"

[configure.module.value.butterworth_highpass_filter_strings_child_frequency]
value                   = 105

[configure.module.butterworth_lowpass_filter.strings]
audio_input             = "butterworth_highpass_filter.strings"

[configure.module.value.butterworth_lowpass_filter_strings_child_frequency]
value                   = 15000

[configure.module.average.strings]
audio_input             = "butterworth_lowpass_filter.strings"

[configure.module.value.average_strings_child_size]
# Higher value -> less noise, but also less clear signal
value                   = 40

[configure.module.mixer.pre_master]
audio_input_0           = "average.strings"

[configure.module.mixer.pre_master.default_dict.audio_input_0_channel_mapping]
0                       = [0, 1]

[configure.module.value.mixer_pre_master_child_decibel]
value                   = -3

[configure.module.mixer.master]
send_to_physical_output = true
audio_input_0           = "mixer.pre_master"

[configure.module.value.mixer_master_child_decibel]
value                   = 14
